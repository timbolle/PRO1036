<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Tim Bollé">
  <meta name="dcterms.date" content="2024-11-25">
  <title>PRO1036 – 09 - Machine Learning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">09 - Machine Learning</h1>
  <p class="subtitle">PRO1036 - Analyse de données scientifiques en R</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Tim Bollé 
</div>
</div>
</div>

  <p class="date">November 25, 2024</p>
</section>
<section>
<section id="modélisation" class="title-slide slide level1 center">
<h1>Modélisation</h1>

</section>
<section id="buts-de-lanalyse-de-données" class="slide level2">
<h2>Buts de l’analyse de données</h2>
<ul>
<li>Comprendre les données</li>
<li>Extraire des informations</li>
<li>Prédire des valeurs</li>
<li>Prendre des décisions</li>
</ul>
</section>
<section id="modélisation-1" class="slide level2">
<h2>Modélisation</h2>
<p>Intervient dans le processus d’analyse de données</p>

<img data-src="figs/data-science-process.png" class="r-stretch"><p>Le machine learning permet notamment de prédire des valeurs et prendre des décisions.</p>
</section>
<section id="types-de-modèles" class="slide level2">
<h2>Types de modèles</h2>
<ul>
<li>Modèles descriptifs</li>
<li>Modèles inférentiels</li>
<li>Modèles prédictifs</li>
</ul>
</section>
<section id="types-de-modèles-1" class="slide level2">
<h2>Types de modèles</h2>

<img data-src="figs/ml_map.svg" class="r-stretch"></section>
<section id="types-de-machine-learning" class="slide level2">
<h2>Types de machine learning</h2>
<ul>
<li><strong>Supervised learning</strong>: On a des données étiquetées
<ul>
<li>Classification</li>
<li>Régression</li>
</ul></li>
<li><strong>Unsupervised learning</strong>: On a des données non étiquetées
<ul>
<li>Clustering</li>
<li>Réduction de dimension</li>
</ul></li>
<li>…</li>
</ul>
</section>
<section id="processus-de-modélisation" class="slide level2">
<h2>Processus de modélisation</h2>
<ul>
<li><strong>Exploratory data analysis (EDA)</strong>: Comprendre les données, se poser des questions</li>
<li><strong>Feature engineering</strong>: Créer de nouvelles variables à partir des données ou sélectionner les variables les plus pertinentes</li>
<li><strong>Sélection de modèle et tuning</strong>: Choisir le modèle le plus adapté et ajuster les hyperparamètres</li>
<li><strong>Évaluation du modèle</strong>: Mesurer la performance du modèle</li>
</ul>
</section>
<section id="processus-de-modélisation-1" class="slide level2">
<h2>Processus de modélisation</h2>

<img data-src="figs/modeling-process.svg" style="background-color: #FFFFFF" class="r-stretch"></section>
<section id="modeling-et-tidyverse" class="slide level2">
<h2>Modeling et tidyverse</h2>
<p><span class="heavy-red">Tidymodel</span> est un ensemble de packages qui permettent de faire du machine learning avec le tidyverse.</p>
<p>On retrouve les packages:</p>
<ul>
<li><code>parsnip</code>: Interface pour les modèles</li>
<li><code>dials</code>: Sélection d’hyperparamètres</li>
<li><code>tune</code>: Tuning des hyperparamètres</li>
<li><code>workflow</code>: Workflows pour les modèles</li>
<li><code>yardstick</code>: Métriques de performance</li>
<li><code>recipes</code>: Préparation des données</li>
</ul>
</section></section>
<section>
<section id="modélisation---étapes-générales" class="title-slide slide level1 center">
<h1>Modélisation - Étapes générales</h1>

</section>
<section id="étapes-générales" class="slide level2">
<h2>Étapes générales</h2>
<ol start="0" type="1">
<li><strong>Préparation des données</strong>: Nettoyage, transformation, normalisation</li>
<li><strong>Séparation des données</strong>: Entraînement et test</li>
<li><strong>Feature engineering</strong>: Création de nouvelles variables ou sélection des variables les plus pertinentes</li>
<li><strong>Choix du modèle</strong>: Sélection du modèle le plus adapté</li>
<li><strong>Entraînement du modèle</strong>: Apprentissage du modèle sur les données d’entraînement</li>
<li><strong>Évaluation du modèle</strong>: Mesure de la performance du modèle sur les données de test</li>
</ol>
</section>
<section id="les-données" class="slide level2">
<h2>Les données</h2>
<p>Pour les slides suivantes, nous allons utiliser le jeu de données <code>cells</code> du package <code>modeldata</code>, publiées par <a href="http://www.biomedcentral.com/1471-2105/8/340">Hill, LaPan, Li, and Haney (2007)</a>.</p>
<p>Le jeu de données concerne des images de cellules cancéreuses et indique si elles sont bien segmentées (<code>WS</code>) ou non (<code>PS</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">glimpse</span>(cells)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,019
Columns: 58
$ case                         &lt;fct&gt; Test, Train, Train, Train, Test, Test, Te…
$ class                        &lt;fct&gt; PS, PS, WS, PS, PS, WS, WS, PS, WS, WS, W…
$ angle_ch_1                   &lt;dbl&gt; 143.247705, 133.752037, 106.646387, 69.15…
$ area_ch_1                    &lt;int&gt; 185, 819, 431, 298, 285, 172, 177, 251, 4…
$ avg_inten_ch_1               &lt;dbl&gt; 15.71186, 31.92327, 28.03883, 19.45614, 2…
$ avg_inten_ch_2               &lt;dbl&gt; 4.954802, 206.878517, 116.315534, 102.294…
$ avg_inten_ch_3               &lt;dbl&gt; 9.548023, 69.916880, 63.941748, 28.217544…
$ avg_inten_ch_4               &lt;dbl&gt; 2.214689, 164.153453, 106.696602, 31.0280…
$ convex_hull_area_ratio_ch_1  &lt;dbl&gt; 1.124509, 1.263158, 1.053310, 1.202625, 1…
$ convex_hull_perim_ratio_ch_1 &lt;dbl&gt; 0.9196827, 0.7970801, 0.9354750, 0.865829…
$ diff_inten_density_ch_1      &lt;dbl&gt; 29.51923, 31.87500, 32.48771, 26.73228, 3…
$ diff_inten_density_ch_3      &lt;dbl&gt; 13.77564, 43.12228, 35.98577, 22.91732, 2…
$ diff_inten_density_ch_4      &lt;dbl&gt; 6.826923, 79.308424, 51.357050, 26.393701…
$ entropy_inten_ch_1           &lt;dbl&gt; 4.969781, 6.087592, 5.883557, 5.420065, 5…
$ entropy_inten_ch_3           &lt;dbl&gt; 4.371017, 6.642761, 6.683000, 5.436732, 5…
$ entropy_inten_ch_4           &lt;dbl&gt; 2.718884, 7.880155, 7.144601, 5.778329, 5…
$ eq_circ_diam_ch_1            &lt;dbl&gt; 15.36954, 32.30558, 23.44892, 19.50279, 1…
$ eq_ellipse_lwr_ch_1          &lt;dbl&gt; 3.060676, 1.558394, 1.375386, 3.391220, 2…
$ eq_ellipse_oblate_vol_ch_1   &lt;dbl&gt; 336.9691, 2232.9055, 802.1945, 724.7143, …
$ eq_ellipse_prolate_vol_ch_1  &lt;dbl&gt; 110.0963, 1432.8246, 583.2504, 213.7031, …
$ eq_sphere_area_ch_1          &lt;dbl&gt; 742.1156, 3278.7256, 1727.4104, 1194.9320…
$ eq_sphere_vol_ch_1           &lt;dbl&gt; 1900.996, 17653.525, 6750.985, 3884.084, …
$ fiber_align_2_ch_3           &lt;dbl&gt; 1.000000, 1.487935, 1.300522, 1.220424, 1…
$ fiber_align_2_ch_4           &lt;dbl&gt; 1.000000, 1.352374, 1.522316, 1.733250, 1…
$ fiber_length_ch_1            &lt;dbl&gt; 26.98132, 64.28230, 21.14115, 43.14112, 3…
$ fiber_width_ch_1             &lt;dbl&gt; 7.410365, 13.167079, 21.141150, 7.404412,…
$ inten_cooc_asm_ch_3          &lt;dbl&gt; 0.011183899, 0.028051061, 0.006862315, 0.…
$ inten_cooc_asm_ch_4          &lt;dbl&gt; 0.050448005, 0.012594975, 0.006141691, 0.…
$ inten_cooc_contrast_ch_3     &lt;dbl&gt; 40.751777, 8.227953, 14.446074, 7.299457,…
$ inten_cooc_contrast_ch_4     &lt;dbl&gt; 13.895439, 6.984046, 16.700843, 13.390884…
$ inten_cooc_entropy_ch_3      &lt;dbl&gt; 7.199458, 6.822138, 7.580100, 6.312641, 6…
$ inten_cooc_entropy_ch_4      &lt;dbl&gt; 5.249744, 7.098988, 7.671478, 7.197026, 5…
$ inten_cooc_max_ch_3          &lt;dbl&gt; 0.07741935, 0.15321477, 0.02835052, 0.162…
$ inten_cooc_max_ch_4          &lt;dbl&gt; 0.17197452, 0.07387141, 0.02319588, 0.077…
$ kurt_inten_ch_1              &lt;dbl&gt; -0.656744087, -0.248769067, -0.293484630,…
$ kurt_inten_ch_3              &lt;dbl&gt; -0.608058268, -0.330783900, 1.051281336, …
$ kurt_inten_ch_4              &lt;dbl&gt; 0.7258145, -0.2652638, 0.1506140, -0.3472…
$ length_ch_1                  &lt;dbl&gt; 26.20779, 47.21855, 28.14303, 37.85957, 3…
$ neighbor_avg_dist_ch_1       &lt;dbl&gt; 370.4543, 174.4442, 158.4774, 206.3344, 2…
$ neighbor_min_dist_ch_1       &lt;dbl&gt; 99.10349, 30.11114, 34.94477, 33.08030, 2…
$ neighbor_var_dist_ch_1       &lt;dbl&gt; 127.96080, 81.38063, 90.43768, 116.89276,…
$ perim_ch_1                   &lt;dbl&gt; 68.78338, 154.89876, 84.56460, 101.09107,…
$ shape_bfr_ch_1               &lt;dbl&gt; 0.6651480, 0.5397584, 0.7243116, 0.589162…
$ shape_lwr_ch_1               &lt;dbl&gt; 2.462450, 1.468181, 1.328408, 2.826854, 2…
$ shape_p_2_a_ch_1             &lt;dbl&gt; 1.883006, 2.255810, 1.272193, 2.545840, 2…
$ skew_inten_ch_1              &lt;dbl&gt; 0.45450484, 0.39870467, 0.47248709, 0.881…
$ skew_inten_ch_3              &lt;dbl&gt; 0.46039340, 0.61973079, 0.97137879, 0.999…
$ skew_inten_ch_4              &lt;dbl&gt; 1.2327736, 0.5272631, 0.3247065, 0.604439…
$ spot_fiber_count_ch_3        &lt;int&gt; 1, 4, 2, 4, 1, 1, 0, 2, 1, 1, 1, 0, 0, 2,…
$ spot_fiber_count_ch_4        &lt;dbl&gt; 5, 12, 7, 8, 8, 5, 5, 8, 12, 8, 5, 6, 7, …
$ total_inten_ch_1             &lt;int&gt; 2781, 24964, 11552, 5545, 6603, 53779, 43…
$ total_inten_ch_2             &lt;dbl&gt; 701, 160998, 47511, 28870, 30306, 107681,…
$ total_inten_ch_3             &lt;int&gt; 1690, 54675, 26344, 8042, 5569, 21234, 20…
$ total_inten_ch_4             &lt;int&gt; 392, 128368, 43959, 8843, 11037, 57231, 4…
$ var_inten_ch_1               &lt;dbl&gt; 12.47468, 18.80923, 17.29564, 13.81897, 1…
$ var_inten_ch_3               &lt;dbl&gt; 7.609035, 56.715352, 37.671053, 30.005643…
$ var_inten_ch_4               &lt;dbl&gt; 2.714100, 118.388139, 49.470524, 24.74953…
$ width_ch_1                   &lt;dbl&gt; 10.64297, 32.16126, 21.18553, 13.39283, 1…</code></pre>
</div>
</div>
</section></section>
<section>
<section id="séparation-des-données" class="title-slide slide level1 center">
<h1>Séparation des données</h1>

</section>
<section id="séparation-des-données-1" class="slide level2">
<h2>Séparation des données</h2>
<p>Il est commun de séparer les données en deux partitions:</p>
<ul>
<li><strong>Données d’entraînement</strong>: Pour estimer les paramètres, comparer les modèles, ajuster les hyperparamètres, etc.</li>
<li><strong>Données de test</strong>: Pour évaluer la performance finale du modèle. Cette partie est gardée en réserve jusqu’à la fin du projet.</li>
</ul>
<p>Il existe différentes façons de créer ces partitions des données. L’approche la plus courante est d’utiliser un échantillon aléatoire. Supposons qu’un quart des données soit réservé pour les données de test. L’échantillonnage aléatoire sélectionnerait aléatoirement 25% pour les données de test et utiliserait le reste pour les données d’entraînement. On peut utiliser le package <code>rsample</code> à cet effet.</p>
</section>
<section id="séparation-des-données-2" class="slide level2">
<h2>Séparation des données</h2>
<p>Une première approche assez simple serait de séparer les données en deux groupes selon une proportion fixée:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>cell_preprossed <span class="ot">&lt;-</span> cells <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>case)</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a>cell_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(cell_preprossed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="séparation-des-données-3" class="slide level2">
<h2>Séparation des données</h2>
<p>Par défaut, la proportion de données dans le set d’entrainement est de 75%. Ici, nous avons un petit soucis: nos classes ne sont pas équilibrées.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>cells <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  class     n  prop
  &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;
1 PS     1300 0.644
2 WS      719 0.356</code></pre>
</div>
</div>
<p>La solution est de préciser que nous voulons une stratification des données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>cell_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(cell_preprossed,</span>
<span id="cb6-2"><a></a>                            <span class="at">strata =</span> class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="séparation-des-données-4" class="slide level2">
<h2>Séparation des données</h2>
<p>Nous pouvons alors séparer nos deux jeux de données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>cell_train <span class="ot">&lt;-</span> <span class="fu">training</span>(cell_split)</span>
<span id="cb7-2"><a></a>cell_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(cell_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Les proportions sont maintenant équilibrées.</p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>cell_train <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  class     n  prop
  &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;
1 PS      975 0.644
2 WS      539 0.356</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>cell_test <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  class     n  prop
  &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;
1 PS      325 0.644
2 WS      180 0.356</code></pre>
</div>
</div>
</div></div>
</section>
<section id="feature-engineering" class="slide level2">
<h2>Feature engineering</h2>
<p>Dans cet exemple, il n’est pas nécessaire de faire une feature engineering. Nous allons utiliser toutes les variables disponibles.</p>
</section></section>
<section>
<section id="modélisation-2" class="title-slide slide level1 center">
<h1>Modélisation</h1>

</section>
<section id="choix-du-modèle" class="slide level2">
<h2>Choix du modèle</h2>
<p>Nous allons utiliser un modèle de régression logistique pour prédire si une cellule est bien segmentée ou non.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>logistic_reg <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a></a>  <span class="fu">set_engine</span>(<span class="st">"glm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="entraînement-du-modèle" class="slide level2">
<h2>Entraînement du modèle</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>logistic_fit <span class="ot">&lt;-</span> logistic_reg <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a></a>  <span class="fu">fit</span>(class <span class="sc">~</span> ., <span class="at">data =</span> cell_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="évaluation-du-modèle" class="slide level2">
<h2>Évaluation du modèle</h2>
<p>Commençons par voir les performances du modèle sur les données d’entraînement.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>gml_training_pred <span class="ot">&lt;-</span> </span>
<span id="cb14-2"><a></a>  <span class="fu">predict</span>(logistic_fit, cell_train) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a></a>  <span class="fu">bind_cols</span>(<span class="fu">predict</span>(logistic_fit, cell_train, <span class="at">type =</span> <span class="st">"prob"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a></a>  <span class="co"># Add the true outcome data back in</span></span>
<span id="cb14-5"><a></a>  <span class="fu">bind_cols</span>(cell_train <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a></a>              <span class="fu">select</span>(class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>gml_training_pred <span class="sc">%&gt;%</span>                <span class="co"># training set predictions</span></span>
<span id="cb15-2"><a></a>  <span class="fu">roc_auc</span>(<span class="at">truth =</span> class, .pred_PS)  <span class="co"># truth and predicted probabilities</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 roc_auc binary         0.896</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>gml_training_pred <span class="sc">%&gt;%</span>                <span class="co"># training set predictions</span></span>
<span id="cb17-2"><a></a>  <span class="fu">accuracy</span>(<span class="at">truth =</span> class, .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric  .estimator .estimate
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
1 accuracy binary         0.822</code></pre>
</div>
</div>
</section>
<section id="prédiction-avec-le-modèle" class="slide level2">
<h2>Prédiction avec le modèle</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>gml_test_pred <span class="ot">&lt;-</span> </span>
<span id="cb19-2"><a></a>  <span class="fu">predict</span>(logistic_fit, cell_test) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a></a>  <span class="fu">bind_cols</span>(<span class="fu">predict</span>(logistic_fit, cell_test, <span class="at">type =</span> <span class="st">"prob"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a></a>  <span class="co"># Add the true outcome data back in</span></span>
<span id="cb19-5"><a></a>  <span class="fu">bind_cols</span>(cell_test <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a></a>              <span class="fu">select</span>(class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>gml_test_pred <span class="sc">%&gt;%</span>                <span class="co"># training set predictions</span></span>
<span id="cb20-2"><a></a>  <span class="fu">roc_auc</span>(<span class="at">truth =</span> class, .pred_PS)  <span class="co"># truth and predicted probabilities</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 roc_auc binary         0.894</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>gml_test_pred <span class="sc">%&gt;%</span>                <span class="co"># training set predictions</span></span>
<span id="cb22-2"><a></a>  <span class="fu">accuracy</span>(<span class="at">truth =</span> class, .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric  .estimator .estimate
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
1 accuracy binary         0.814</code></pre>
</div>
</div>
</section></section>
<section>
<section id="rééchantillonnage" class="title-slide slide level1 center">
<h1>Rééchantillonnage</h1>

</section>
<section id="rééchantillonnage-1" class="slide level2">
<h2>Rééchantillonnage</h2>
<p>Pour obtenir une meilleure estimation de la performance du modèle, on peut utiliser le rééchantillonnage.</p>

<img data-src="figs/resampling.svg" style="background-color: #FDFDE1" class="r-stretch"></section>
<section id="rééchantillonnage-2" class="slide level2">
<h2>Rééchantillonnage</h2>
<p>Il existe plusieurs méthodes de rééchantillonnage:</p>
<ul>
<li>Validation croisée</li>
<li>Bootstrap</li>
<li>Leave-one-out</li>
<li>…</li>
</ul>
<p>Nous allons utiliser la validation croisée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(cell_train, <span class="at">v =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="validation-croisée" class="slide level2">
<h2>Validation croisée</h2>

<img data-src="figs/cv.png" class="r-stretch"></section>
<section id="rééchantillonnage-3" class="slide level2">
<h2>Rééchantillonnage</h2>
<p>Nous pouvons alors entraîner notre modèle sur les différents <em>folds</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>gml_res <span class="ot">&lt;-</span> logistic_reg <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a></a>  <span class="fu">fit_resamples</span>(class <span class="sc">~</span> ., </span>
<span id="cb25-3"><a></a>                <span class="at">resamples =</span> folds)</span>
<span id="cb25-4"><a></a></span>
<span id="cb25-5"><a></a><span class="fu">collect_metrics</span>(gml_res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  .metric     .estimator  mean     n std_err .config             
  &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 accuracy    binary     0.797    10 0.00904 Preprocessor1_Model1
2 brier_class binary     0.139    10 0.00511 Preprocessor1_Model1
3 roc_auc     binary     0.871    10 0.00875 Preprocessor1_Model1</code></pre>
</div>
</div>
<p>Nous voyons que les performances sont assez similaires à celles obtenues avec les données de test !</p>
</section></section>
<section>
<section id="optimisation-des-hyperparamètres" class="title-slide slide level1 center">
<h1>Optimisation des hyperparamètres</h1>

</section>
<section id="tune" class="slide level2">
<h2><code>tune()</code></h2>
<p>Certains modèles possèdent des hyperparamètres qui peuvent être ajustés pour améliorer la performance du modèle.</p>
<p>Nous allons prendre comme exemple le même jeu de données mais cette fois nous allons utiliser un modèle d’arbre de décision.</p>
</section>
<section id="arbre-de-décisions" class="slide level2">
<h2>Arbre de décisions</h2>
<div class="columns">
<div class="column">
<p><img data-src="figs/iris-decision-tree-1.png"></p>
</div><div class="column">
<p><img data-src="figs/iris-decision-tree-2.png"></p>
</div></div>
</section>
<section id="arbre-de-décisions-1" class="slide level2">
<h2>Arbre de décisions</h2>
<p>Il y a deux hyperparamètres principaux pour les arbres de décisions:</p>
<ul>
<li><code>cost_complexity</code>: Ajoute une pénalité pour la complexité de l’arbre et permet d’éviter l’overfitting</li>
<li><code>tree_depth</code>: Profondeur maximale de l’arbre</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" data-code-line-numbers="3,4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>tune_spec <span class="ot">&lt;-</span> </span>
<span id="cb27-2"><a></a>  <span class="fu">decision_tree</span>(</span>
<span id="cb27-3"><a></a>    <span class="at">cost_complexity =</span> <span class="fu">tune</span>(), <span class="co"># Paramètre à tuner</span></span>
<span id="cb27-4"><a></a>    <span class="at">tree_depth =</span> <span class="fu">tune</span>()       <span class="co"># Paramètre à tuner</span></span>
<span id="cb27-5"><a></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-6"><a></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-7"><a></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb27-8"><a></a></span>
<span id="cb27-9"><a></a>tune_spec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Decision Tree Model Specification (classification)

Main Arguments:
  cost_complexity = tune()
  tree_depth = tune()

Computational engine: rpart </code></pre>
</div>
</div>
</section>
<section id="recherche-des-hyperparamètres" class="slide level2">
<h2>Recherche des hyperparamètres</h2>
<p>Nous allons ensuite lui donner une grille de recherche. Il va tester toutes les combinaisons possibles des hyperparamètres pour trouver la meilleure combinaison.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>tree_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(<span class="fu">cost_complexity</span>(),</span>
<span id="cb29-2"><a></a>                          <span class="fu">tree_depth</span>(),</span>
<span id="cb29-3"><a></a>                          <span class="at">levels =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recherche-des-hyperparamètres-1" class="slide level2">
<h2>Recherche des hyperparamètres</h2>
<p>On commence par séparer nos données en données d’entraînement et de test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb30-2"><a></a>cell_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(cells <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>case), </span>
<span id="cb30-3"><a></a>                            <span class="at">strata =</span> class)</span>
<span id="cb30-4"><a></a>cell_train <span class="ot">&lt;-</span> <span class="fu">training</span>(cell_split)</span>
<span id="cb30-5"><a></a>cell_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(cell_split)</span>
<span id="cb30-6"><a></a></span>
<span id="cb30-7"><a></a>cell_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(cell_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recherche-des-hyperparamètres-2" class="slide level2">
<h2>Recherche des hyperparamètres</h2>
<p>On peut maintenant lancer la recherche des hyperparamètres.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>tune_res <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(tune_spec,</span>
<span id="cb31-2"><a></a>                      class <span class="sc">~</span> .,         <span class="co"># On indique la formule</span></span>
<span id="cb31-3"><a></a>                      <span class="at">resamples =</span> folds,</span>
<span id="cb31-4"><a></a>                      <span class="at">grid =</span> tree_grid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analyse-des-résultats" class="slide level2">
<h2>Analyse des résultats</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>tune_res <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 8
   cost_complexity tree_depth .metric     .estimator  mean     n std_err .config
             &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1    0.0000000001          1 accuracy    binary     0.731    10 0.0121  Prepro…
 2    0.0000000001          1 brier_class binary     0.170    10 0.00294 Prepro…
 3    0.0000000001          1 roc_auc     binary     0.764    10 0.00790 Prepro…
 4    0.0000000178          1 accuracy    binary     0.731    10 0.0121  Prepro…
 5    0.0000000178          1 brier_class binary     0.170    10 0.00294 Prepro…
 6    0.0000000178          1 roc_auc     binary     0.764    10 0.00790 Prepro…
 7    0.00000316            1 accuracy    binary     0.731    10 0.0121  Prepro…
 8    0.00000316            1 brier_class binary     0.170    10 0.00294 Prepro…
 9    0.00000316            1 roc_auc     binary     0.764    10 0.00790 Prepro…
10    0.000562              1 accuracy    binary     0.731    10 0.0121  Prepro…
# ℹ 65 more rows</code></pre>
</div>
</div>
</section>
<section id="analyse-des-résultats-1" class="slide level2">
<h2>Analyse des résultats</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>tune_res <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a></a>  <span class="fu">mutate</span>(<span class="at">tree_depth =</span> <span class="fu">factor</span>(tree_depth)) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(cost_complexity, mean, <span class="at">color =</span> tree_depth)) <span class="sc">+</span></span>
<span id="cb34-5"><a></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb34-6"><a></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb34-7"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> .metric, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb34-8"><a></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>()) <span class="sc">+</span></span>
<span id="cb34-9"><a></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">begin =</span> .<span class="dv">9</span>, <span class="at">end =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="09---ML_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section>
<section id="choix-des-hyperparamètres" class="slide level2">
<h2>Choix des hyperparamètres</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>tune_res <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"accuracy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  cost_complexity tree_depth .metric  .estimator  mean     n std_err .config    
            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      
1    0.0000000001          4 accuracy binary     0.801    10 0.00792 Preprocess…
2    0.0000000178          4 accuracy binary     0.801    10 0.00792 Preprocess…
3    0.00000316            4 accuracy binary     0.801    10 0.00792 Preprocess…
4    0.000562              4 accuracy binary     0.801    10 0.00792 Preprocess…
5    0.0000000001          8 accuracy binary     0.781    10 0.00853 Preprocess…</code></pre>
</div>
</div>
<p>On peut maintenant entraîner notre modèle avec les hyperparamètres optimisés. Nous allons</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>best_tree <span class="ot">&lt;-</span> tune_res <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a></a>  <span class="fu">select_best</span>(<span class="at">metric =</span> <span class="st">"accuracy"</span>)</span>
<span id="cb37-3"><a></a></span>
<span id="cb37-4"><a></a>final_tree <span class="ot">&lt;-</span> <span class="fu">finalize_model</span>(tune_spec, best_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="entraînement-du-modèle-1" class="slide level2">
<h2>Entraînement du modèle</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>final_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(final_tree,</span>
<span id="cb38-2"><a></a>                      class <span class="sc">~</span> .,</span>
<span id="cb38-3"><a></a>                      cell_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Performances :</p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>final_fit <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  .metric     .estimator .estimate .config             
  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy    binary         0.824 Preprocessor1_Model1
2 roc_auc     binary         0.848 Preprocessor1_Model1
3 brier_class binary         0.141 Preprocessor1_Model1</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>final_fit <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a></a>  <span class="fu">roc_curve</span>(class, .pred_PS) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a></a>  <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="09---ML_files/figure-revealjs/unnamed-chunk-28-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section></section>
<section>
<section id="recettes-et-workflows" class="title-slide slide level1 center">
<h1>Recettes et workflows</h1>

</section>
<section id="feitures-engineering-avec-recipes" class="slide level2">
<h2>Feitures engineering avec <code>recipes</code></h2>
<p><code>tidymodels</code> et son package <code>recipes</code> permettent de créer des recettes pour préparer les données. Cela permet de transformer certaines variables, de créer de nouvelles variables, etc.</p>
<p>Nous allons prendre ici comme exemple le jeu de données <code>nyflights13</code>.</p>
</section>
<section id="data-prerocessing" class="slide level2">
<h2>Data prerocessing</h2>
<p>Commencons par préparer et nettroyer nos données:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb42-2"><a></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb42-3"><a></a></span>
<span id="cb42-4"><a></a>flight_data <span class="ot">&lt;-</span> </span>
<span id="cb42-5"><a></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb42-6"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-7"><a></a>    <span class="co"># On change le retard en facteur</span></span>
<span id="cb42-8"><a></a>    <span class="at">arr_delay =</span> <span class="fu">ifelse</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">30</span>, <span class="st">"late"</span>, <span class="st">"on_time"</span>),</span>
<span id="cb42-9"><a></a>    <span class="at">arr_delay =</span> <span class="fu">factor</span>(arr_delay),</span>
<span id="cb42-10"><a></a>    <span class="co"># Nous aurons besoin de la date</span></span>
<span id="cb42-11"><a></a>    <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">as_date</span>(time_hour)</span>
<span id="cb42-12"><a></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb42-13"><a></a>  <span class="co"># On ajoute les données de météo</span></span>
<span id="cb42-14"><a></a>  <span class="fu">inner_join</span>(weather, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"origin"</span>, <span class="st">"time_hour"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-15"><a></a>  <span class="co"># On ne garde que les colonnes utiles</span></span>
<span id="cb42-16"><a></a>  <span class="fu">select</span>(dep_time, flight, origin, dest, air_time, distance, </span>
<span id="cb42-17"><a></a>         carrier, date, arr_delay, time_hour) <span class="sc">%&gt;%</span> </span>
<span id="cb42-18"><a></a>  <span class="co"># On enlève les lignes avec des données manquantes</span></span>
<span id="cb42-19"><a></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-20"><a></a>  <span class="co"># Pour faire des modèles, on préfère avoir des facteurs que du texte</span></span>
<span id="cb42-21"><a></a>  <span class="fu">mutate_if</span>(is.character, as.factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous allons chercher à prédire le retard en fonction de différentes variables</p>
</section>
<section id="data-preprocessing" class="slide level2">
<h2>Data preprocessing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="fu">glimpse</span>(flight_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 325,819
Columns: 10
$ dep_time  &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, 558, …
$ flight    &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 49, 71…
$ origin    &lt;fct&gt; EWR, LGA, JFK, JFK, LGA, EWR, EWR, LGA, JFK, LGA, JFK, JFK, …
$ dest      &lt;fct&gt; IAH, IAH, MIA, BQN, ATL, ORD, FLL, IAD, MCO, ORD, PBI, TPA, …
$ air_time  &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 158, 3…
$ distance  &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, 1028,…
$ carrier   &lt;fct&gt; UA, UA, AA, B6, DL, UA, B6, EV, B6, AA, B6, B6, UA, UA, AA, …
$ date      &lt;date&gt; 2013-01-01, 2013-01-01, 2013-01-01, 2013-01-01, 2013-01-01,…
$ arr_delay &lt;fct&gt; on_time, on_time, late, on_time, on_time, on_time, on_time, …
$ time_hour &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 05:00:…</code></pre>
</div>
</div>
</section>
<section id="séparation-des-données-5" class="slide level2">
<h2>Séparation des données</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a>data_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(flight_data, <span class="at">prop =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb45-2"><a></a></span>
<span id="cb45-3"><a></a>train_data <span class="ot">&lt;-</span> <span class="fu">training</span>(data_split)</span>
<span id="cb45-4"><a></a>test_data  <span class="ot">&lt;-</span> <span class="fu">testing</span>(data_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recettes" class="slide level2">
<h2>Recettes</h2>
<p>Une recette de base prend une <strong>formule</strong> et des <strong>données</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>flights_rec <span class="ot">&lt;-</span> </span>
<span id="cb46-2"><a></a>  <span class="fu">recipe</span>(arr_delay <span class="sc">~</span> ., <span class="at">data =</span> train_data) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Par défaut, toutes les variables sont des <code>predictors</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">summary</span>(flights_rec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   variable  type      role      source  
   &lt;chr&gt;     &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
 1 dep_time  &lt;chr [2]&gt; predictor original
 2 flight    &lt;chr [2]&gt; predictor original
 3 origin    &lt;chr [3]&gt; predictor original
 4 dest      &lt;chr [3]&gt; predictor original
 5 air_time  &lt;chr [2]&gt; predictor original
 6 distance  &lt;chr [2]&gt; predictor original
 7 carrier   &lt;chr [3]&gt; predictor original
 8 date      &lt;chr [1]&gt; predictor original
 9 time_hour &lt;chr [1]&gt; predictor original
10 arr_delay &lt;chr [3]&gt; outcome   original</code></pre>
</div>
</div>
</section>
<section id="recettes-1" class="slide level2">
<h2>Recettes</h2>
<p>Nous pouvons maintenant appliquer des transformations sur les colonnes pour créer des variables adaptées à notre modèle.</p>
<p>Il existe de nombreuses recettes dans le package <code>recipes</code>. Elles ont toute la forme <code>step_X()</code> où <code>X</code> sera le nom d’une recette.</p>
<p>Par exemple, la recette <code>step_date</code> permet de transformer une date en une autre variable (jour de la semaine, mois, années, …)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>flights_rec <span class="ot">&lt;-</span> </span>
<span id="cb49-2"><a></a>  <span class="fu">recipe</span>(arr_delay <span class="sc">~</span> ., <span class="at">data =</span> train_data) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a></a>  <span class="fu">step_date</span>(date, <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"dow"</span>, <span class="st">"month"</span>))</span>
<span id="cb49-4"><a></a></span>
<span id="cb49-5"><a></a><span class="fu">prep</span>(flights_rec) <span class="sc">%&gt;%</span> <span class="fu">juice</span>() <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"date"</span>)) <span class="co"># Pour voir le résultat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 244,364 × 3
   date       date_dow date_month
   &lt;date&gt;     &lt;fct&gt;    &lt;fct&gt;     
 1 2013-05-03 Fri      May       
 2 2013-03-04 Mon      Mar       
 3 2013-02-20 Wed      Feb       
 4 2013-04-02 Tue      Apr       
 5 2013-06-13 Thu      Jun       
 6 2013-02-21 Thu      Feb       
 7 2013-05-08 Wed      May       
 8 2013-10-21 Mon      Oct       
 9 2013-11-12 Tue      Nov       
10 2013-09-11 Wed      Sep       
# ℹ 244,354 more rows</code></pre>
</div>
</div>
</section>
<section id="recettes-2" class="slide level2">
<h2>Recettes</h2>
<p>Nous allons transformer les variables de différentes manières:</p>
<ul>
<li><code>update_role</code>: Pour indiquer les variables que l’on veut garder comme identifiant (<code>ID</code>)</li>
<li><code>step_date</code>: Pour transformer la date en variables plus utiles</li>
<li><code>step_holiday</code>: Pour indiquer si une date tombe un jour férié</li>
<li><code>step_dummy</code>: Pour transformer les variables catégorielles en variables binaires</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>flights_rec <span class="ot">&lt;-</span> </span>
<span id="cb51-2"><a></a>  <span class="fu">recipe</span>(arr_delay <span class="sc">~</span> ., <span class="at">data =</span> train_data) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a></a>  <span class="fu">update_role</span>(flight, time_hour, <span class="at">new_role =</span> <span class="st">"ID"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb51-4"><a></a>  <span class="fu">step_date</span>(date, <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"dow"</span>, <span class="st">"month"</span>)) <span class="sc">%&gt;%</span>               </span>
<span id="cb51-5"><a></a>  <span class="fu">step_holiday</span>(date, </span>
<span id="cb51-6"><a></a>               <span class="at">holidays =</span> timeDate<span class="sc">::</span><span class="fu">listHolidays</span>(<span class="st">"US"</span>), </span>
<span id="cb51-7"><a></a>               <span class="at">keep_original_cols =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-8"><a></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="faire-un-workflow" class="slide level2">
<h2>Faire un <code>workflow</code></h2>
<p>Un <code>workflow</code> est une combinaison d’une recette et d’un modèle. Il permet d’enchainer différentes opérations.</p>
<p>Commençons par définir un modèle:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a>lr_mod <span class="ot">&lt;-</span> </span>
<span id="cb52-2"><a></a>  <span class="fu">logistic_reg</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a></a>  <span class="fu">set_engine</span>(<span class="st">"glm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workflow" class="slide level2">
<h2><code>workflow</code></h2>
<p>Nous pouvons maintenant combiner notre recette et notre modèle pour créer un <code>workflow</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>flights_wf <span class="ot">&lt;-</span> </span>
<span id="cb53-2"><a></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a></a>  <span class="fu">add_recipe</span>(flights_rec) <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a></a>  <span class="fu">add_model</span>(lr_mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="entrainer-un-workflow" class="slide level2">
<h2>Entrainer un <code>workflow</code></h2>
<p>Nous pouvons ensuite entraîner notre modèle. Pour cela, nous pouvons directement utiliser la fonction <code>fit</code> du <code>workflow</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a></a>flights_fit <span class="ot">&lt;-</span> </span>
<span id="cb54-2"><a></a>  flights_wf <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a></a>  <span class="fu">fit</span>(<span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rééchantillonnage-avec-un-workflow" class="slide level2">
<h2>Rééchantillonnage avec un <code>workflow</code></h2>
<p>Nous pouvons également fiter notre modèle avec une validation croisée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>flights_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(train_data, <span class="at">v=</span><span class="dv">10</span>)</span>
<span id="cb55-2"><a></a></span>
<span id="cb55-3"><a></a>flights_res <span class="ot">&lt;-</span> </span>
<span id="cb55-4"><a></a>  flights_wf <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a></a>  <span class="fu">fit_resamples</span>(<span class="at">resamples =</span> flights_folds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="évaluation-du-modèle-1" class="slide level2">
<h2>Évaluation du modèle</h2>
<p>Comme précédemment, nous pouvons directement accéder aux résultats du modèle</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a>flights_res <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  .metric     .estimator  mean     n  std_err .config             
  &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;               
1 accuracy    binary     0.849    10 0.000521 Preprocessor1_Model1
2 brier_class binary     0.114    10 0.000359 Preprocessor1_Model1
3 roc_auc     binary     0.766    10 0.00111  Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="hyperparamètres-et-workflow" class="slide level2">
<h2>Hyperparamètres et <code>workflow</code></h2>
<p>Nous pouvons également utiliser les fonctions pour optimiser les hyperparamètres directement avec un workflow.</p>
<p>Précédemment, nous avions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a></a>tune_res <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(tune_spec,</span>
<span id="cb58-2"><a></a>                      class <span class="sc">~</span> .,         <span class="co"># On indique la formule</span></span>
<span id="cb58-3"><a></a>                      <span class="at">resamples =</span> folds,</span>
<span id="cb58-4"><a></a>                      <span class="at">grid =</span> tree_grid)</span>
<span id="cb58-5"><a></a></span>
<span id="cb58-6"><a></a>best_tree <span class="ot">&lt;-</span> tune_res <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a></a>  <span class="fu">select_best</span>(<span class="at">metric =</span> <span class="st">"accuracy"</span>)</span>
<span id="cb58-8"><a></a></span>
<span id="cb58-9"><a></a>final_tree <span class="ot">&lt;-</span> <span class="fu">finalize_model</span>(tune_spec, best_tree)</span>
<span id="cb58-10"><a></a></span>
<span id="cb58-11"><a></a>final_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(final_tree,</span>
<span id="cb58-12"><a></a>                      class <span class="sc">~</span> .,</span>
<span id="cb58-13"><a></a>                      cell_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="hyperparamètres-et-workflow-1" class="slide level2">
<h2>Hyperparamètres et <code>workflow</code></h2>
<p>Avec un <code>workflow</code>, cela devient:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>tree_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a></a>  <span class="fu">add_model</span>(tune_spec) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a></a>  <span class="fu">add_formula</span>(class <span class="sc">~</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a></a></span>
<span id="cb59-5"><a></a>best_tree <span class="ot">&lt;-</span> </span>
<span id="cb59-6"><a></a>  tree_wf <span class="sc">%&gt;%</span> </span>
<span id="cb59-7"><a></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb59-8"><a></a>    <span class="at">resamples =</span> cell_folds,</span>
<span id="cb59-9"><a></a>    <span class="at">grid =</span> tree_grid</span>
<span id="cb59-10"><a></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb59-11"><a></a>  <span class="fu">select_best</span>(<span class="at">metric =</span> <span class="st">"accuracy"</span>)</span>
<span id="cb59-12"><a></a></span>
<span id="cb59-13"><a></a>final_wf <span class="ot">&lt;-</span> </span>
<span id="cb59-14"><a></a>  tree_wf <span class="sc">%&gt;%</span> </span>
<span id="cb59-15"><a></a>  <span class="fu">finalize_workflow</span>(best_tree)</span>
<span id="cb59-16"><a></a></span>
<span id="cb59-17"><a></a>final_fit <span class="ot">&lt;-</span> </span>
<span id="cb59-18"><a></a>  final_wf <span class="sc">%&gt;%</span></span>
<span id="cb59-19"><a></a>  <span class="fu">last_fit</span>(cell_split) </span>
<span id="cb59-20"><a></a></span>
<span id="cb59-21"><a></a>final_fit <span class="sc">%&gt;%</span></span>
<span id="cb59-22"><a></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="références" class="slide level2 smaller scrollable">
<h2>Références</h2>
<div id="refs" role="list">

</div>

<div class="quarto-auto-generated-content">
<p><img src="../template/h-UQTR-r.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>PRO1036 - 04 | Tim Bollé</p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1350,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>